<div class="land" [style.width.px]="scaleInfo.landWidth" [style.height.px]="scaleInfo.landHeight"
     [style.left.px]="landCenter.x" [style.top.px]="landCenter.y"
        (mousedown)="beginPan($event)">
    <template ngFor let-row [ngForOf]="tiles">
        <city-tile *ngFor="let tile of row" [tile]="tile" [city]="city" (tileClicked)="tileSelected(tile)"
                   [style.width.px]="scaleInfo.tileWidth" [style.height.px]="scaleInfo.tileHeight"
                   [style.left.px]="scaleInfo.convertPosX(tile.position)"
                   [style.top.px]="scaleInfo.convertPosY(tile.position)"
                   [scaleInfo]="scaleInfo"
                   [selected]="selectedTile == tile" [moving]="moving"></city-tile>
    </template>

    <template ngFor let-row [ngForOf]="battleFieldTiles">
        <!-- TODO (tileClicked)="tileSelected(tile)" [selected]="selectedTile == tile" [moving]="moving" -->
        <battlefield-tile *ngFor="let tile of row" [tile]="tile" [city]="city"
                   [style.width.px]="scaleInfo.tileWidth" [style.height.px]="scaleInfo.tileHeight"
                   [style.left.px]="scaleInfo.convertPosX(tile.globalPosition)"
                   [style.top.px]="scaleInfo.convertPosY(tile.globalPosition)"
                   [scaleInfo]="scaleInfo"
                   ></battlefield-tile>
    </template>
</div>

<template [ngIf]="selectedTile != null">
    <tile-actions [city]="city" [tile]="selectedTile" (moveBuilding)="startMoveBuilding($event)" [isMoving]="moving != null"></tile-actions>
</template>

<city-info-panel *ngIf="city != null" [city]="city"></city-info-panel>